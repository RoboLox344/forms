import{a as f,r as l,j as e}from"./index-CyZljdq1.js";import{F as g,c as I,a as h,T as o,D as B,C as c,S as d,b as j,d as v,e as n,f as u,g as p}from"./TextAreaInput-wnd3w7db.js";import{u as R,c as q,a as N}from"./api-BoG1k1_a.js";const w=I({namePosition:n(),nameVacancy:n().required("Укажите наименование"),department:n().required("Укажите отдел"),dateBegin:p().required("Выберите дату открытия"),dateEnd:p().required("Выберите дату закрытия").test("is-valid-data","Дата закрытия должна быть позже даты открытия",function(a){const{dateBegin:i}=this.parent;return a&&i?new Date(a).getTime()>new Date(i).getTime():!0}),gender:n().required("Выберите пол"),education:n().required("Выберите образование"),typeSalary:n(),salBegin:u().min(0,"хочешь отрицательную зарплату??"),salEnd:u().min(0,"хочешь отрицательную зарплату??").test("is-greater","Конечная зп >= нач ?!",function(a){const{salBegin:i}=this.parent;return a===void 0||i===void 0||a>=i}),region:n().required("Укажите регион"),address:n().required("Введите полный адрес. Например, Походный проезд, 3с1").test("is-valid-address","Адрес должен быть в формате: улица, номер дома/корпуса",a=>/^[А-Яа-яЁёA-Za-z\s]+,\s*\d+[А-Яа-яЁёA-Za-z0-9\-]+$/.test(a)),metro:n(),experience:n().required("Укажите опыт работы"),workSchedule:n().required("Укажите график работы"),employmentType:n().required("Выберите тип занятости"),functionalResponsibilities:n(),wishes:n(),advantage:n(),weOffer:n()}),S=[{isReq:!1,nameInput:"namePosition",placText:"",textInput:"Форма размещения заявки",typeInput:"text"},{isReq:!0,nameInput:"nameVacancy",placText:"",textInput:"Наименование вакансии",typeInput:"text"},{isReq:!0,nameInput:"department",placText:"",textInput:"Отдел",typeInput:"text"}],T=[{nameInput:"dateBegin",isReq:!0,textInput:"Дата открытия"},{nameInput:"dateEnd",isReq:!0,textInput:"Плановая дата закрытия"}],b={isReq:!0,nameInput:"gender",chekName:"Пол",radioBtns:[{radioName:"Мужской",radioValue:"male"},{radioName:"Женский",radioValue:"female"}]},k={isReq:!0,selectName:"education",textSelect:"Образование",selectValues:[{label:"Высшее",value:"higher"},{label:"Среднее",value:"average"}]},E={isReq:!1,boxName:"Зарплата",radioBtns:[{radioName:"На руки",radioValue:"cash"},{radioName:"До вычета налогов",radioValue:"beforeDeduction"}],typeSalary:"typeSalary",salEnd:"salEnd",salBegin:"salBegin",placText:"",typeInput:"number"},V=[{isReq:!0,nameInput:"region",placText:"",textInput:"Регион",typeInput:"search"},{isReq:!0,nameInput:"address",placText:"",textInput:"Адрес",typeInput:"text",customClass:!0},{isReq:!1,nameInput:"metro",placText:"",textInput:"Станция метро, МЦД",typeInput:"text"}],D={isReq:!0,nameInput:"experience",placText:"",textInput:"Опыт работы",typeInput:"text"},C={isReq:!0,selectName:"workSchedule",textSelect:"График работы",selectValues:[{label:"Полный день",value:"fullDay"},{label:"Сменный 5/2",value:"Replaceable5/2"},{label:"Сменный 2/2",value:"Replaceable2/2"}]},O={isReq:!0,nameInput:"employmentType",chekName:"Тип занятости",radioBtns:[{radioName:"Полная занятость",radioValue:"fullEmployment"},{radioName:"Частичная занятость",radioValue:"partTime"},{radioName:"Стажировка",radioValue:"internship"}]},P=[{nameInput:"functionalResponsibilities",textInput:"Функциональные обязанности",placText:"Какую работу будет выполнять сотрудник",text:null},{nameInput:"wishes",textInput:"Пожелания к кандидату",placText:"Ключевые навыки, достижения",text:null},{nameInput:"advantage",textInput:"Преимуществом будет",placText:"Дополнительные специальные навыки",text:null},{nameInput:"weOffer",textInput:"Мы предлагаем",placText:"",text:"Дружный коллектив, интересные задачи и возможность быть услышанным; Приобретение навыков работы в большой, разветвлённой и сложноподчинённой структуре, задействованной в сфере ИТ; Оформление в соответствии с ТК РФ; Полностью официальная заработная плата"}];function L(){const{id:a}=f(),[i,r]=l.useState(!0),[m,x]=l.useState({namePosition:"",nameVacancy:"",department:"",dateBegin:"",dateEnd:"",gender:"",education:"",typeSalary:"",salEnd:0,salBegin:0,region:"",address:"",metro:"",experience:"",workSchedule:"",functionalResponsibilities:"",wishes:"",advantage:"",weOffer:"",employmentType:""}),y=async()=>{if(a&&a!==null&&a!==void 0)try{const t=await N(Number(a));console.log(t),x({namePosition:t.namePosition||"",nameVacancy:t.nameVacancy||"",department:t.department||"",dateBegin:t.dateBegin||"",dateEnd:t.dateEnd||"",gender:t.gender||"",education:t.education||"",typeSalary:t.typeSalary||"",salEnd:t.salEnd||"",salBegin:t.salBegin||"",region:t.region||"",address:t.address||"",metro:t.metro||"",experience:t.experience||"",workSchedule:t.workSchedule||"",functionalResponsibilities:t.functionalResponsibilities||"",wishes:t.wishes||"",advantage:t.advantage||"",weOffer:t.weOffer||"",employmentType:t.employmentType||""}),r(!1)}catch(t){console.error("server err",t),r(!1)}};return l.useEffect(()=>{r(!0),y()},[a]),e.jsx("main",{children:e.jsx("section",{id:"qreateReauest",children:e.jsxs("div",{className:"container",style:{display:"flex",flexDirection:"column",gap:56,marginBottom:106},children:[e.jsx("h1",{style:{textAlign:"start",color:"#4c73e3"},children:"Форма размещения заявки"}),i?e.jsx("div",{children:"Load"}):e.jsx(g,{initialValues:m,validationSchema:w,validateOnChange:!0,validateOnBlur:!0,onSubmit:async t=>{try{a?(await R(Number(a),t),console.log("Запись обновлена!")):(await q(t),console.log("Запись создана!"))}catch(s){console.error("Ошибка при отправке данных",s)}},children:({resetForm:t})=>e.jsxs(h,{style:{display:"flex",flexDirection:"column",gap:32},children:[e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"form-section",children:S.map(s=>e.jsx(o,{...s},s.nameInput))}),e.jsx("div",{className:"form-section",children:T.map(s=>e.jsx(B,{...s},s.nameInput))}),e.jsxs("div",{className:"form-section",children:[e.jsx(c,{...b}),e.jsx(d,{...k})]})]}),e.jsxs("div",{className:"form-container",children:[e.jsx("div",{className:"form-section",children:e.jsx(j,{...E})}),e.jsx("div",{className:"form-section",children:V.map(s=>e.jsx(o,{...s},s.nameInput))}),e.jsxs("div",{className:"form-section",children:[e.jsx(o,{...D}),e.jsx(d,{...C}),e.jsx(c,{...O})]})]}),e.jsx("div",{className:"form-container",children:P.map(s=>e.jsx("div",{className:"form-section",children:e.jsx(v,{...s},s.nameInput)}))}),e.jsxs("div",{className:"btns-wp",children:[e.jsx("button",{className:"btn-sumbit",type:"submit",children:"Отправить"}),e.jsx("button",{className:"btn-reset",onClick:()=>{t({values:{namePosition:"",nameVacancy:"",department:"",dateBegin:"",dateEnd:"",gender:"",education:"",typeSalary:"",salBegin:0,salEnd:0,region:"",address:"",metro:"",experience:"",workSchedule:"",functionalResponsibilities:"",wishes:"",advantage:"",weOffer:"",employmentType:""}})},children:"Сбросить"})]})]})},a)]})})})}export{L as default};
